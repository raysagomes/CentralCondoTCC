version: "3.9"
services:
  kong:
    image: kong:3.6
    environment:
      KONG_DATABASE: "off"
      KONG_DECLARATIVE_CONFIG: "/kong/kong.yml"
      KONG_PROXY_LISTEN: "0.0.0.0:8000"
      KONG_ADMIN_LISTEN: "0.0.0.0:8001"
    volumes:
      - ./kong.yml:/kong/kong.yml:ro
    ports:
      - "8000:8000" # proxy
      - "8001:8001" # admin
    depends_on:
      - auth
      - condominio
      - financeiro
      - projetos
    networks: [ appnet ]

  # Exemplos de servi√ßos (troque por seus containers)
  auth:
    image: seu-registry/auth:latest
    expose: ["3001"]
    networks: [ appnet ]

  condominio:
    image: seu-registry/condominio:latest
    expose: ["3002"]
    networks: [ appnet ]

  financeiro:
    image: seu-registry/financeiro:latest
    expose: ["3003"]
    networks: [ appnet ]

  projetos:
    image: seu-registry/projetos:latest
    expose: ["3004"]
    networks: [ appnet ]

networks:
  appnet: {}
